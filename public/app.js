angular.module("LMSApp",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,r){e.otherwise("/login"),t.state("login",{url:"/login",templateUrl:"src/login/login.html"}).state("signup",{url:"/signup",templateUrl:"src/signup/signup.html"}).state("overview",{url:"/overview",templateUrl:"src/login/overview.html"}).state("courses",{url:"/courses",templateUrl:"src/course/courses.html"}).state("quizes",{url:"/quizes",templateUrl:"src/quiz/quizes.html"}).state("profile",{url:"/profile",templateUrl:"src/profile/profile.html"}),r.html5Mode(!0)}]).run(["$rootScope",function(t){t.$on("$stateChangeStart",function(e,r,o){r.requireLogin&&"undefined"==typeof t.currentUser&&(e.preventDefault(),$state.go("login"))})}]),angular.module("LMSApp").controller("CourseController",["$scope","courseService","userService",function(t,e,r){t.newCourse={title:"",department:"",number:"",instructor:""},t.addCourse=function(){console.log(t.newCourse)};var o=function(){e.fetch(function(e){r.getInstructors(function(r){t.instructors=r;var o=e.map(function(t){for(var e=0;e<r.length;e++)r[e]._id===t.instructorId&&(t.instructorName=r[e].lastname);return t});t.courses=o})})};o()}]),angular.module("LMSApp").factory("courseService",["$http",function(t){var e="http://127.0.0.1:3000/api/course",r=function(r){t.get(e).then(function(t){return r(t.data.data)},function(t){console.log(t)})};return{fetch:r}}]),angular.module("LMSApp").controller("LoginController",["$scope","$state","userService",function(t,e,r){t.emailPattern=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,t.user={},t.login=function(){r.login(t.user,function(t){t.type===!0&&(r.setUser=t.user,e.go("courses"))})},t.validate=function(){console.log("hello"),$location.path("/")}}]),angular.module("LMSApp").factory("userService",["$http",function(t){var e="http://127.0.0.1:3000/api/",r=e+"user/",o=e+"login",n=e+"instructors",u="",i=!1,l="",a=function(e,o){var n={data:e};t.post(r,n).then(function(t){return u=t.data.data,i=!0,o(t.data.data)},function(t){console.log(t.data.data)})},s=function(e,r){var n={data:e};t.post(o,n).then(function(t){return r(t.data.data)},function(t){console.log(t)})},c=function(t){u=t,i=!0,l=t.role},f=function(){return u},p=function(e){t.get(n).then(function(t){return e(t.data.data)},function(t){console.log(t)})},g=function(){u="",i=!1,l=""};return{getInstructors:p,createUser:a,setCurrentUser:c,login:s,logout:g,role:l,getCurrentUser:f}}]),angular.module("LMSApp").controller("SignupController",["$scope","userService","courseService",function(t,e,r){t.emailPattern=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,t.roles=["student","instructor"],t.newUser={firstname:"",lastname:"",email:"",password:"",role:""},t.submit=function(){e.createUser(t.newUser,function(t){console.log(t)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvdXJzZS9Db3Vyc2VDb250cm9sbGVyLmpzIiwiY291cnNlL2NvdXJzZVNlcnZpY2UuanMiLCJsb2dpbi9Mb2dpbkNvbnRyb2xsZXIuanMiLCJzZXJ2aWNlcy91c2VyU2VydmljZS5qcyIsInNpZ251cC9TaWdudXBDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImh0bWw1TW9kZSIsInJ1biIsIiRyb290U2NvcGUiLCIkb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsInJlcXVpcmVMb2dpbiIsImN1cnJlbnRVc2VyIiwicHJldmVudERlZmF1bHQiLCIkc3RhdGUiLCJnbyIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJjb3Vyc2VTZXJ2aWNlIiwidXNlclNlcnZpY2UiLCJuZXdDb3Vyc2UiLCJ0aXRsZSIsImRlcGFydG1lbnQiLCJudW1iZXIiLCJpbnN0cnVjdG9yIiwiYWRkQ291cnNlIiwiY29uc29sZSIsImxvZyIsImluaXQiLCJmZXRjaCIsImNvdXJzZXMiLCJnZXRJbnN0cnVjdG9ycyIsImluc3RydWN0b3JzIiwiYWxsQ291cnNlcyIsIm1hcCIsImNvdXJzZSIsImkiLCJsZW5ndGgiLCJfaWQiLCJpbnN0cnVjdG9ySWQiLCJpbnN0cnVjdG9yTmFtZSIsImxhc3RuYW1lIiwiZmFjdG9yeSIsIiRodHRwIiwiYmFzZVVybCIsImdldEFsbENvdXJzZXMiLCJjYiIsImdldCIsInRoZW4iLCJyZXMiLCJkYXRhIiwiZW1haWxQYXR0ZXJuIiwidXNlciIsImxvZ2luIiwidHlwZSIsInNldFVzZXIiLCJ2YWxpZGF0ZSIsIiRsb2NhdGlvbiIsInBhdGgiLCJ1c2VyVXJsIiwibG9naW5VcmwiLCJpbnN0cnVjdG9yVXJsIiwiaXNMb2dnZWRJbiIsInJvbGUiLCJfY3JlYXRlVXNlciIsImJvZHkiLCJwb3N0IiwiX2xvZ2luIiwiX3NldFVzZXIiLCJfZ2V0VXNlciIsIl9nZXRJbnN0cnVjdG9ycyIsIl9sb2dPdXQiLCJjcmVhdGVVc2VyIiwic2V0Q3VycmVudFVzZXIiLCJsb2dvdXQiLCJnZXRDdXJyZW50VXNlciIsInJvbGVzIiwibmV3VXNlciIsImZpcnN0bmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJzdWJtaXQiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLFVBQUEsY0FNQUMsUUFBQSxpQkFBQSxxQkFBQSxvQkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxVQUFBLFVBRUFILEVBR0FJLE1BQUEsU0FDQUMsSUFBQSxTQUNBQyxZQUFBLHlCQUtBRixNQUFBLFVBQ0FDLElBQUEsVUFDQUMsWUFBQSwyQkFJQUYsTUFBQSxZQUNBQyxJQUFBLFlBQ0FDLFlBQUEsNEJBS0FGLE1BQUEsV0FDQUMsSUFBQSxXQUNBQyxZQUFBLDRCQUtBRixNQUFBLFVBQ0FDLElBQUEsVUFDQUMsWUFBQSx5QkFJQUYsTUFBQSxXQUNBQyxJQUFBLFdBQ0FDLFlBQUEsNkJBR0FKLEVBQUFLLFdBQUEsTUFLQUMsS0FBQSxhQUFBLFNBQUFDLEdBR0FBLEVBQUFDLElBQUEsb0JBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FFQUQsRUFBQUUsY0FBQSxtQkFBQUwsR0FBQU0sY0FDQUosRUFBQUssaUJBRUFDLE9BQUFDLEdBQUEsZUMvREFyQixRQUFBQyxPQUFBLFVBQ0FxQixXQUFBLG9CQUFBLFNBQUEsZ0JBQUEsY0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBRixFQUFBRyxXQUNBQyxNQUFBLEdBQ0FDLFdBQUEsR0FDQUMsT0FBQSxHQUNBQyxXQUFBLElBSUFQLEVBQUFRLFVBQUEsV0FDQUMsUUFBQUMsSUFBQVYsRUFBQUcsV0FJQSxJQUFBUSxHQUFBLFdBQ0FWLEVBQUFXLE1BQUEsU0FBQUMsR0FDQVgsRUFBQVksZUFBQSxT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LCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnTE1TQXBwJywgWyd1aS5yb3V0ZXInXSlcblxuLy8gYXBwIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09XG4vLyAuY29uc3RhbnQoKVxuXG4vLyBjb25maWcgc2V0dGluZ3MgZm9yIHJvdXRlclxuLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgIFxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvbG9naW4nKTtcblxuICAkc3RhdGVQcm92aWRlclxuICAgICAgXG4gICAgICAvLyBsb2dpbiBzdGF0ZSA9PT09PT09PT09PT09PT09PT1cbiAgICAgIC5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy9sb2dpbi9sb2dpbi5odG1sJ1xuICAgICAgICAgIC8vIHJlcXVpcmVMb2dpbjogZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIC8vIHNpZ251cCBzdGF0ZSA9PT09PT09PT09PT09PT09PVxuICAgICAgLnN0YXRlKCdzaWdudXAnLCB7XG4gICAgICAgIHVybDogJy9zaWdudXAnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy9zaWdudXAvc2lnbnVwLmh0bWwnXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBvdmVydmlldyBzdGF0ZSA9PT09PT09PT09PT09PT1cbiAgICAgIC5zdGF0ZSgnb3ZlcnZpZXcnLCB7XG4gICAgICAgICAgdXJsOiAnL292ZXJ2aWV3JyxcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy9sb2dpbi9vdmVydmlldy5odG1sJ1xuICAgICAgICAgIC8vIHJlcXVpcmVMb2dpbjogdHJ1ZVxuICAgICAgfSlcblxuICAgICAgLy8gY291cnNlcyBzdGF0ZSA9PT09PT09PT09PT09PT09XG4gICAgICAuc3RhdGUoJ2NvdXJzZXMnLCB7XG4gICAgICAgIHVybDogJy9jb3Vyc2VzJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvY291cnNlL2NvdXJzZXMuaHRtbCdcbiAgICAgICAgLy8gcmVxdWlyZUxvZ2luOiB0cnVlXG4gICAgICB9KVxuXG4gICAgICAvLyBxdWl6IHN0YXRlID09PT09PT09PT09PT09PT09PT1cbiAgICAgIC5zdGF0ZSgncXVpemVzJywge1xuICAgICAgICB1cmw6ICcvcXVpemVzJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvcXVpei9xdWl6ZXMuaHRtbCdcbiAgICAgIH0pXG5cbiAgICAgIC8vIHByb2ZpbGUgc3RhdGUgPT09PT09PT09PT09PT09PVxuICAgICAgLnN0YXRlKCdwcm9maWxlJywge1xuICAgICAgICB1cmwgOiAnL3Byb2ZpbGUnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy9wcm9maWxlL3Byb2ZpbGUuaHRtbCdcbiAgICAgIH0pXG5cbiAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgICAgXG59KVxuXG4vLyBGb3IgYXV0aGVudGljYXRpb24gY2hlY2tzXG4ucnVuKGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG5cbiAgLy8gbGlzdGVuIG9uIHN0YXRlIGNoYW5nZSBldmVudHNcbiAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcykge1xuICAgIC8vIGlmIGxvZ2luIGlzIHJlcXVpcmVkIGFuZCB0aGVyZSBpcyBubyBjdXJyZW50VXNlciBzZXQsIFxuICAgIGlmICh0b1N0YXRlLnJlcXVpcmVMb2dpbiAmJiB0eXBlb2YgJHJvb3RTY29wZS5jdXJyZW50VXNlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyByZWRpcmVjdCB0byBsb2dpblxuICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgIH1cbiAgfSk7XG5cbn0pOyIsIi8vIENvdXJzZUNvbnRyb2xsZXIuanMgPT09PT09PT09PT09PT09PVxuYW5ndWxhci5tb2R1bGUoJ0xNU0FwcCcpXG4uY29udHJvbGxlcignQ291cnNlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ2NvdXJzZVNlcnZpY2UnLCAndXNlclNlcnZpY2UnLCBmdW5jdGlvbigkc2NvcGUsIGNvdXJzZVNlcnZpY2UsIHVzZXJTZXJ2aWNlKSB7XG4gICRzY29wZS5uZXdDb3Vyc2UgPSB7XG4gICAgdGl0bGUgOiAnJyxcbiAgICBkZXBhcnRtZW50IDogJycsXG4gICAgbnVtYmVyIDogJycsXG4gICAgaW5zdHJ1Y3RvciA6ICcnXG4gIH07XG5cbiAgLy8gbmVlZCB0byBob29rIGludG8gYXBpXG4gICRzY29wZS5hZGRDb3Vyc2UgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygkc2NvcGUubmV3Q291cnNlKTtcbiAgfVxuXG4gIC8vIGdldCBhbGwgY291cnNlcyBvbiBsb2FkXG4gIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgY291cnNlU2VydmljZS5mZXRjaCggZnVuY3Rpb24oY291cnNlcykge1xuICAgICAgdXNlclNlcnZpY2UuZ2V0SW5zdHJ1Y3RvcnMoZnVuY3Rpb24oaW5zdHJ1Y3RvcnMpIHtcbiAgICAgICAgJHNjb3BlLmluc3RydWN0b3JzID0gaW5zdHJ1Y3RvcnM7XG4gICAgICAgIFxuICAgICAgICAvLyBzZXQgY291cnNlc1xuICAgICAgICB2YXIgYWxsQ291cnNlcyA9IGNvdXJzZXMubWFwKCBmdW5jdGlvbihjb3Vyc2UpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluc3RydWN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaW5zdHJ1Y3RvcnNbaV0uX2lkID09PSBjb3Vyc2UuaW5zdHJ1Y3RvcklkKSB7XG4gICAgICAgICAgICAgIGNvdXJzZS5pbnN0cnVjdG9yTmFtZSA9IGluc3RydWN0b3JzW2ldLmxhc3RuYW1lO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBjb3Vyc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgJHNjb3BlLmNvdXJzZXMgPSBhbGxDb3Vyc2VzO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBpbml0KCk7XG59XSk7IiwiLy8gY291cnNlU2VydmljZS5qc1xuYW5ndWxhci5tb2R1bGUoJ0xNU0FwcCcpXG5cbi8vIGZhY3Rvcnkgc2VydmljZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBjb3Vyc2VzIEFQSSBhbmQgcmV0cmVpdmUgZGF0YVxuLmZhY3RvcnkoJ2NvdXJzZVNlcnZpY2UnLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcbiAgLy8gYmFzZSB1cmwgZm9yIEFQSSBlbmRwb2ludFxuICB2YXIgYmFzZVVybCA9ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpL2NvdXJzZSc7XG5cbiAgLy8gZmV0Y2ggY291cnNlcyBhbmQgY2FsbGJhY2tzID09PT09PT09PT09PT09PT1cbiAgdmFyIGdldEFsbENvdXJzZXMgPSBmdW5jdGlvbihjYikge1xuICAgIC8vIGNiIGlzIHRoZSBjYWxsYmFjayBwcm92aWRlZCBieSB0aGUgY29udHJvbGxlclxuICAgICRodHRwLmdldChiYXNlVXJsKS50aGVuKFxuICAgICAgLy8gY2FsbGJhY2sgZm9yIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlcykge1xuICAgICAgICByZXR1cm4gY2IocmVzLmRhdGEuZGF0YSk7XG4gICAgICB9LFxuXG4gICAgICAvLyBjYWxsYmFjayBmb3IgZXJyb3JcbiAgICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICB9XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGZldGNoIDogZ2V0QWxsQ291cnNlc1xuICB9XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnTE1TQXBwJylcbi5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBbJyRzY29wZScsICckc3RhdGUnLCAndXNlclNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUsIHVzZXJTZXJ2aWNlICkge1xuICAvLyBlbWFpbCBwYXR0ZXJuIHJlZ2V4XG4gICRzY29wZS5lbWFpbFBhdHRlcm4gPSAvXihbXFx3LV0rKD86XFwuW1xcdy1dKykqKUAoKD86W1xcdy1dK1xcLikqXFx3W1xcdy1dezAsNjZ9KVxcLihbYS16XXsyLDZ9KD86XFwuW2Etel17Mn0pPykkL2k7XG5cbiAgLy8gaW5pdGlhbGl6ZSB1c2VyIG9iamVjdCB3aXRoIGVtcHR5IHZhbHVlc1xuICAkc2NvcGUudXNlciA9IHt9O1xuXG4gICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgIHVzZXJTZXJ2aWNlLmxvZ2luKCRzY29wZS51c2VyLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIGlmIChkYXRhLnR5cGUgPT09IHRydWUpIHtcbiAgICAgICAgdXNlclNlcnZpY2Uuc2V0VXNlciA9IGRhdGEudXNlcjtcbiAgICAgICAgJHN0YXRlLmdvKCdjb3Vyc2VzJyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLy8gVmFsaWRhdGlvbiAtLS0tLS0tLS0tLS0tXG4gICRzY29wZS52YWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdoZWxsbycpO1xuICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gIH07XG5cbiAgLy8gdXNlcm5hbWUgdmFsaWRhdGlvblxuICBmdW5jdGlvbiB2YWxpZGF0ZVVzZXIoKSB7XG4gICAgdmFyIHVzZXJuYW1lID0gJHNjb3BlLnVzZXIudXNlcm5hbWU7XG5cbiAgICBpZiAoIHVzZXJuYW1lID09PSAnJyB8fCB1c2VybmFtZSA9PT0gMCB8fCAhc2FuaXRpemVJbnB1dCh1c2VybmFtZSkgKSB7XG4gICAgICBjb25zb2xlLmxvZygnaW52YWxpZCB1c2VybmFtZScpO1xuICAgICAgcmV0dXJuIGZhbHNlOyAgIC8vIE5lZWQgdG8gYWRkIGluY29ycmVjdCBib290c3RyYXAgY2xhc3NcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLy8gcGFzc3dvcmQgdmFsaWRhdGlvblxuICBmdW5jdGlvbiB2YWxpZGF0ZVBhc3N3b3JkKCkge1xuICAgIHZhciBwYXNzd29yZCA9ICRzY29wZS51c2VyLnBhc3N3b3JkO1xuXG4gICAgaWYgKCBwYXNzd29yZCA9PT0gJycgfHwgcGFzc3dvcmQgPT09IDAgfHwgIXNhbml0aXplSW5wdXQocGFzc3dvcmQpICkge1xuICAgICAgY29uc29sZS5sb2coJ2ludmFsaWQgcGFzc3dvcmQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLy8gc2FuaXRpemUgaW5wdXRzIGJlZm9yZSBzZW5kaW5nIHRvIHNlcnZlclxuICBmdW5jdGlvbiBzYW5pdGl6ZUlucHV0KHZhbCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XSk7XG5cblxuIiwiLy8gdXNlclNlcnZpY2UuanMgPT09PT09PT09PT09PT09PT09PT09XG5hbmd1bGFyLm1vZHVsZSgnTE1TQXBwJylcbi5mYWN0b3J5KCd1c2VyU2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuICB2YXIgYmFzZVVybCA9ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpLyc7XG4gIHZhciB1c2VyVXJsID0gYmFzZVVybCArICd1c2VyLyc7XG4gIHZhciBsb2dpblVybCA9IGJhc2VVcmwgKyAnbG9naW4nO1xuICB2YXIgaW5zdHJ1Y3RvclVybCA9IGJhc2VVcmwgKyAnaW5zdHJ1Y3RvcnMnO1xuICB2YXIgY3VycmVudFVzZXIgPSAnJztcbiAgdmFyIGlzTG9nZ2VkSW4gPSBmYWxzZTtcbiAgdmFyIGNvdXJzZXMgPSAnJztcbiAgdmFyIHJvbGUgPSAnJztcblxuICB2YXIgX2NyZWF0ZVVzZXIgPSBmdW5jdGlvbih1c2VyLCBjYikge1xuICAgIHZhciBib2R5ID0geyBkYXRhIDogdXNlciB9O1xuICAgICRodHRwLnBvc3QodXNlclVybCwgYm9keSkudGhlbihcbiAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXMpIHtcbiAgICAgICAgY3VycmVudFVzZXIgPSByZXMuZGF0YS5kYXRhO1xuICAgICAgICBpc0xvZ2dlZEluID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGNiKHJlcy5kYXRhLmRhdGEpO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEpO1xuICAgICAgfVxuICAgIClcbiAgfTtcblxuICB2YXIgX2xvZ2luID0gZnVuY3Rpb24odXNlciwgY2IpIHtcbiAgICB2YXIgYm9keSA9IHsgZGF0YSA6IHVzZXIgfTtcbiAgICAkaHR0cC5wb3N0KGxvZ2luVXJsLCBib2R5KS50aGVuKFxuICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlcykge1xuICAgICAgICByZXR1cm4gY2IocmVzLmRhdGEuZGF0YSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgIH1cbiAgICApXG4gIH1cbiAgXG4gIHZhciBfc2V0VXNlciA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICBjdXJyZW50VXNlciA9IHVzZXI7XG4gICAgaXNMb2dnZWRJbiA9IHRydWU7XG4gICAgcm9sZSA9IHVzZXIucm9sZTtcbiAgfVxuXG4gIHZhciBfZ2V0VXNlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBjdXJyZW50VXNlcjtcbiAgfVxuXG4gIHZhciBfZ2V0SW5zdHJ1Y3RvcnMgPSBmdW5jdGlvbihjYikge1xuICAgICRodHRwLmdldChpbnN0cnVjdG9yVXJsKS50aGVuKFxuICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlcykge1xuICAgICAgICByZXR1cm4gY2IocmVzLmRhdGEuZGF0YSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIHZhciBfbG9nT3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgY3VycmVudFVzZXIgPSAnJztcbiAgICBpc0xvZ2dlZEluID0gZmFsc2U7XG4gICAgcm9sZSA9ICcnO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRJbnN0cnVjdG9ycyA6IF9nZXRJbnN0cnVjdG9ycyxcbiAgICBjcmVhdGVVc2VyIDogX2NyZWF0ZVVzZXIsXG4gICAgc2V0Q3VycmVudFVzZXIgOiBfc2V0VXNlcixcbiAgICBsb2dpbiA6IF9sb2dpbixcbiAgICBsb2dvdXQgOiBfbG9nT3V0LFxuICAgIHJvbGUgOiByb2xlLFxuICAgIGdldEN1cnJlbnRVc2VyIDogX2dldFVzZXJcbiAgfVxufV0pOyIsIi8vIFNpZ25VcENvbnRyb2xsZXIuanMgPT09PT09PT09PT09PT09PVxuYW5ndWxhci5tb2R1bGUoJ0xNU0FwcCcpXG4uY29udHJvbGxlcignU2lnbnVwQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3VzZXJTZXJ2aWNlJywgJ2NvdXJzZVNlcnZpY2UnLCBmdW5jdGlvbigkc2NvcGUsIHVzZXJTZXJ2aWNlLCBjb3Vyc2VTZXJ2aWNlKSB7XG4gIC8vIGVtYWlsIHBhdHRlcm5cbiAgJHNjb3BlLmVtYWlsUGF0dGVybiA9IC9eKFtcXHctXSsoPzpcXC5bXFx3LV0rKSopQCgoPzpbXFx3LV0rXFwuKSpcXHdbXFx3LV17MCw2Nn0pXFwuKFthLXpdezIsNn0oPzpcXC5bYS16XXsyfSk/KSQvaTtcblxuICAkc2NvcGUucm9sZXMgPSBbJ3N0dWRlbnQnLCAnaW5zdHJ1Y3RvciddO1xuXG4gIC8vIG5ldyB1c2VyIGZyb20gZm9ybVxuICAkc2NvcGUubmV3VXNlciA9IHtcbiAgICBmaXJzdG5hbWUgOiAnJyxcbiAgICBsYXN0bmFtZSA6ICcnLFxuICAgIGVtYWlsIDogJycsXG4gICAgcGFzc3dvcmQgOiAnJyxcbiAgICByb2xlIDogJydcbiAgfTtcblxuICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgdXNlclNlcnZpY2UuY3JlYXRlVXNlcigkc2NvcGUubmV3VXNlciwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgfSk7XG4gIH1cblxufV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
