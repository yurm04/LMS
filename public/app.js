angular.module("LMSApp",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){t.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"src/login/login.html"}).state("signup",{url:"/signup",templateUrl:"src/signup/signup.html"}).state("overview",{url:"/overview",templateUrl:"src/login/overview.html"}).state("courses",{url:"/courses",templateUrl:"src/course/courses.html"}).state("quizes",{url:"/quizes",templateUrl:"src/quiz/quizes.html"}).state("profile",{url:"/profile",templateUrl:"src/profile/profile.html"}),o.html5Mode(!0)}]).run(["$rootScope",function(e){e.$on("$stateChangeStart",function(t,o,r){o.requireLogin&&"undefined"==typeof e.currentUser&&(t.preventDefault(),$state.go("login"))})}]),angular.module("LMSApp").controller("CourseController",["$scope","courseService","userService",function(e,t,o){e.newCourse={title:"",department:"",number:"",instructor:""},e.addCourse=function(){console.log(e.newCourse)};var r=function(){t.fetch(function(t){o.getInstructors(function(o){e.instructors=o;var r=t.map(function(e){for(var t=0;t<o.length;t++)o[t]._id===e.instructorId&&(e.instructorName=o[t].lastname);return e});e.courses=r})})};r()}]),angular.module("LMSApp").factory("courseService",["$http",function(e){var t="http://127.0.0.1:3000/api/course",o=function(o){e.get(t).then(function(e){return o(e.data.data)},function(e){console.log(e)})};return{fetch:o}}]),angular.module("LMSApp").controller("LoginController",["$scope","$state","userService",function(e,t,o){e.emailPattern=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,e.user={},e.login=function(){o.login(e.user,function(e){console.log(e),e.type===!0&&(console.log(e),o.setUser=e.user,t.go("courses"))})},e.validate=function(){console.log("hello"),$location.path("/")}}]),angular.module("LMSApp").factory("userService",["$http",function(e){var t="http://127.0.0.1:3000/api/",o=t+"user/",r=t+"login",n=t+"instructors",u="",l=!1,i="",a=function(t,r){var n={data:t};e.post(o,n).then(function(e){return u=e.data.data,l=!0,r(e.data.data)},function(e){console.log(e.data.data)})},s=function(t,o){var n={data:t};console.log(n),e.post(r,n).then(function(e){return o(e.data.data)},function(e){console.log(e)})},c=function(e){u=e,l=!0,i=e.role},f=function(){return u},p=function(t){e.get(n).then(function(e){return t(e.data.data)},function(e){console.log(e)})},g=function(){u="",l=!1,i=""};return{getInstructors:p,createUser:a,setCurrentUser:c,login:s,logout:g,role:i,getCurrentUser:f}}]),angular.module("LMSApp").controller("SignupController",["$scope","userService","courseService",function(e,t,o){e.emailPattern=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,e.roles=["student","instructor"],e.newUser={firstname:"",lastname:"",email:"",password:"",role:""},e.submit=function(){t.createUser(e.newUser,function(e){console.log(e)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvdXJzZS9Db3Vyc2VDb250cm9sbGVyLmpzIiwiY291cnNlL2NvdXJzZVNlcnZpY2UuanMiLCJsb2dpbi9Mb2dpbkNvbnRyb2xsZXIuanMiLCJzZXJ2aWNlcy91c2VyU2VydmljZS5qcyIsInNpZ251cC9TaWdudXBDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImh0bWw1TW9kZSIsInJ1biIsIiRyb290U2NvcGUiLCIkb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsInJlcXVpcmVMb2dpbiIsImN1cnJlbnRVc2VyIiwicHJldmVudERlZmF1bHQiLCIkc3RhdGUiLCJnbyIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJjb3Vyc2VTZXJ2aWNlIiwidXNlclNlcnZpY2UiLCJuZXdDb3Vyc2UiLCJ0aXRsZSIsImRlcGFydG1lbnQiLCJudW1iZXIiLCJpbnN0cnVjdG9yIiwiYWRkQ291cnNlIiwiY29uc29sZSIsImxvZyIsImluaXQiLCJmZXRjaCIsImNvdXJzZXMiLCJnZXRJbnN0cnVjdG9ycyIsImluc3RydWN0b3JzIiwiYWxsQ291cnNlcyIsIm1hcCIsImNvdXJzZSIsImkiLCJsZW5ndGgiLCJfaWQiLCJpbnN0cnVjdG9ySWQiLCJpbnN0cnVjdG9yTmFtZSIsImxhc3RuYW1lIiwiZmFjdG9yeSIsIiRodHRwIiwiYmFzZVVybCIsImdldEFsbENvdXJzZXMiLCJjYiIsImdldCIsInRoZW4iLCJyZXMiLCJkYXRhIiwiZW1haWxQYXR0ZXJuIiwidXNlciIsImxvZ2luIiwidHlwZSIsInNldFVzZXIiLCJ2YWxpZGF0ZSIsIiRsb2NhdGlvbiIsInBhdGgiLCJ1c2VyVXJsIiwibG9naW5VcmwiLCJpbnN0cnVjdG9yVXJsIiwiaXNMb2dnZWRJbiIsInJvbGUiLCJfY3JlYXRlVXNlciIsImJvZHkiLCJwb3N0IiwiX2xvZ2luIiwiX3NldFVzZXIiLCJfZ2V0VXNlciIsIl9nZXRJbnN0cnVjdG9ycyIsIl9sb2dPdXQiLCJjcmVhdGVVc2VyIiwic2V0Q3VycmVudFVzZXIiLCJsb2dvdXQiLCJnZXRDdXJyZW50VXNlciIsInJvbGVzIiwibmV3VXNlciIsImZpcnN0bmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJzdWJtaXQiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLFVBQUEsY0FNQUMsUUFBQSxpQkFBQSxxQkFBQSxvQkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxVQUFBLFVBRUFILEVBR0FJLE1BQUEsU0FDQUMsSUFBQSxTQUNBQyxZQUFBLHlCQUtBRixNQUFBLFVBQ0FDLElBQUEsVUFDQUMsWUFBQSwyQkFJQUYsTUFBQSxZQUNBQyxJQUFBLFlBQ0FDLFlBQUEsNEJBS0FGLE1BQUEsV0FDQUMsSUFBQSxXQUNBQyxZQUFBLDRCQUtBRixNQUFBLFVBQ0FDLElBQUEsVUFDQUMsWUFBQSx5QkFJQUYsTUFBQSxXQUNBQyxJQUFBLFdBQ0FDLFlBQUEsNkJBR0FKLEVBQUFLLFdBQUEsTUFLQUMsS0FBQSxhQUFBLFNBQUFDLEdBR0FBLEVBQUFDLElBQUEsb0JBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FFQUQsRUFBQUUsY0FBQSxtQkFBQUwsR0FBQU0sY0FDQUosRUFBQUssaUJBRUFDLE9BQUFDLEdBQUEsZUMvREFyQixRQUFBQyxPQUFBLFVBQ0FxQixXQUFBLG9CQUFBLFNBQUEsZ0JBQUEsY0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBRixFQUFBRyxXQUNBQyxNQUFBLEdBQ0FDLFdBQUEsR0FDQUMsT0FBQSxHQUNBQyxXQUFBLElBSUFQLEVBQUFRLFVBQUEsV0FDQUMsUUFBQUMsSUFBQVYsRUFBQUcsV0FJQSxJQUFBUSxHQUFBLFdBQ0FWLEVBQUFXLE1BQUEsU0FBQUMsR0FDQVgsRUFBQVksZUFBQSxT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QUFBNEQsUUFBQSxTQUFBM0IsR0FDQXhCLFFBQUFDLElBQUF1QiIsImZpbGUiOiJwdWJsaWMvYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ0xNU0FwcCcsIFsndWkucm91dGVyJ10pXG5cbi8vIGFwcCBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PVxuLy8gLmNvbnN0YW50KClcblxuLy8gY29uZmlnIHNldHRpbmdzIGZvciByb3V0ZXJcbi5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICBcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2xvZ2luJyk7XG5cbiAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIFxuICAgICAgLy8gbG9naW4gc3RhdGUgPT09PT09PT09PT09PT09PT09XG4gICAgICAuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvbG9naW4vbG9naW4uaHRtbCdcbiAgICAgICAgICAvLyByZXF1aXJlTG9naW46IGZhbHNlXG4gICAgICB9KVxuXG4gICAgICAvLyBzaWdudXAgc3RhdGUgPT09PT09PT09PT09PT09PT1cbiAgICAgIC5zdGF0ZSgnc2lnbnVwJywge1xuICAgICAgICB1cmw6ICcvc2lnbnVwJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvc2lnbnVwL3NpZ251cC5odG1sJ1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gb3ZlcnZpZXcgc3RhdGUgPT09PT09PT09PT09PT09XG4gICAgICAuc3RhdGUoJ292ZXJ2aWV3Jywge1xuICAgICAgICAgIHVybDogJy9vdmVydmlldycsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvbG9naW4vb3ZlcnZpZXcuaHRtbCdcbiAgICAgICAgICAvLyByZXF1aXJlTG9naW46IHRydWVcbiAgICAgIH0pXG5cbiAgICAgIC8vIGNvdXJzZXMgc3RhdGUgPT09PT09PT09PT09PT09PVxuICAgICAgLnN0YXRlKCdjb3Vyc2VzJywge1xuICAgICAgICB1cmw6ICcvY291cnNlcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3JjL2NvdXJzZS9jb3Vyc2VzLmh0bWwnXG4gICAgICAgIC8vIHJlcXVpcmVMb2dpbjogdHJ1ZVxuICAgICAgfSlcblxuICAgICAgLy8gcXVpeiBzdGF0ZSA9PT09PT09PT09PT09PT09PT09XG4gICAgICAuc3RhdGUoJ3F1aXplcycsIHtcbiAgICAgICAgdXJsOiAnL3F1aXplcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3JjL3F1aXovcXVpemVzLmh0bWwnXG4gICAgICB9KVxuXG4gICAgICAvLyBwcm9maWxlIHN0YXRlID09PT09PT09PT09PT09PT1cbiAgICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcbiAgICAgICAgdXJsIDogJy9wcm9maWxlJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvcHJvZmlsZS9wcm9maWxlLmh0bWwnXG4gICAgICB9KVxuXG4gICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgIFxufSlcblxuLy8gRm9yIGF1dGhlbnRpY2F0aW9uIGNoZWNrc1xuLnJ1bihmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xuXG4gIC8vIGxpc3RlbiBvbiBzdGF0ZSBjaGFuZ2UgZXZlbnRzXG4gICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMpIHtcbiAgICAvLyBpZiBsb2dpbiBpcyByZXF1aXJlZCBhbmQgdGhlcmUgaXMgbm8gY3VycmVudFVzZXIgc2V0LCBcbiAgICBpZiAodG9TdGF0ZS5yZXF1aXJlTG9naW4gJiYgdHlwZW9mICRyb290U2NvcGUuY3VycmVudFVzZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gcmVkaXJlY3QgdG8gbG9naW5cbiAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICB9XG4gIH0pO1xuXG59KTsiLCIvLyBDb3Vyc2VDb250cm9sbGVyLmpzID09PT09PT09PT09PT09PT1cbmFuZ3VsYXIubW9kdWxlKCdMTVNBcHAnKVxuLmNvbnRyb2xsZXIoJ0NvdXJzZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICdjb3Vyc2VTZXJ2aWNlJywgJ3VzZXJTZXJ2aWNlJywgZnVuY3Rpb24oJHNjb3BlLCBjb3Vyc2VTZXJ2aWNlLCB1c2VyU2VydmljZSkge1xuICAkc2NvcGUubmV3Q291cnNlID0ge1xuICAgIHRpdGxlIDogJycsXG4gICAgZGVwYXJ0bWVudCA6ICcnLFxuICAgIG51bWJlciA6ICcnLFxuICAgIGluc3RydWN0b3IgOiAnJ1xuICB9O1xuXG4gIC8vIG5lZWQgdG8gaG9vayBpbnRvIGFwaVxuICAkc2NvcGUuYWRkQ291cnNlID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJHNjb3BlLm5ld0NvdXJzZSk7XG4gIH1cblxuICAvLyBnZXQgYWxsIGNvdXJzZXMgb24gbG9hZFxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGNvdXJzZVNlcnZpY2UuZmV0Y2goIGZ1bmN0aW9uKGNvdXJzZXMpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEluc3RydWN0b3JzKGZ1bmN0aW9uKGluc3RydWN0b3JzKSB7XG4gICAgICAgICRzY29wZS5pbnN0cnVjdG9ycyA9IGluc3RydWN0b3JzO1xuICAgICAgICBcbiAgICAgICAgLy8gc2V0IGNvdXJzZXNcbiAgICAgICAgdmFyIGFsbENvdXJzZXMgPSBjb3Vyc2VzLm1hcCggZnVuY3Rpb24oY291cnNlKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnN0cnVjdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGluc3RydWN0b3JzW2ldLl9pZCA9PT0gY291cnNlLmluc3RydWN0b3JJZCkge1xuICAgICAgICAgICAgICBjb3Vyc2UuaW5zdHJ1Y3Rvck5hbWUgPSBpbnN0cnVjdG9yc1tpXS5sYXN0bmFtZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4gY291cnNlO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgICRzY29wZS5jb3Vyc2VzID0gYWxsQ291cnNlcztcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgaW5pdCgpO1xufV0pOyIsIi8vIGNvdXJzZVNlcnZpY2UuanNcbmFuZ3VsYXIubW9kdWxlKCdMTVNBcHAnKVxuXG4vLyBmYWN0b3J5IHNlcnZpY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgY291cnNlcyBBUEkgYW5kIHJldHJlaXZlIGRhdGFcbi5mYWN0b3J5KCdjb3Vyc2VTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gIC8vIGJhc2UgdXJsIGZvciBBUEkgZW5kcG9pbnRcbiAgdmFyIGJhc2VVcmwgPSAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2FwaS9jb3Vyc2UnO1xuXG4gIC8vIGZldGNoIGNvdXJzZXMgYW5kIGNhbGxiYWNrcyA9PT09PT09PT09PT09PT09XG4gIHZhciBnZXRBbGxDb3Vyc2VzID0gZnVuY3Rpb24oY2IpIHtcbiAgICAvLyBjYiBpcyB0aGUgY2FsbGJhY2sgcHJvdmlkZWQgYnkgdGhlIGNvbnRyb2xsZXJcbiAgICAkaHR0cC5nZXQoYmFzZVVybCkudGhlbihcbiAgICAgIC8vIGNhbGxiYWNrIGZvciBzdWNjZXNzZnVsIHJlcXVlc3RcbiAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXMpIHtcbiAgICAgICAgcmV0dXJuIGNiKHJlcy5kYXRhLmRhdGEpO1xuICAgICAgfSxcblxuICAgICAgLy8gY2FsbGJhY2sgZm9yIGVycm9yXG4gICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgfVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBmZXRjaCA6IGdldEFsbENvdXJzZXNcbiAgfVxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0xNU0FwcCcpXG4uY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJ3VzZXJTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCB1c2VyU2VydmljZSApIHtcbiAgLy8gZW1haWwgcGF0dGVybiByZWdleFxuICAkc2NvcGUuZW1haWxQYXR0ZXJuID0gL14oW1xcdy1dKyg/OlxcLltcXHctXSspKilAKCg/OltcXHctXStcXC4pKlxcd1tcXHctXXswLDY2fSlcXC4oW2Etel17Miw2fSg/OlxcLlthLXpdezJ9KT8pJC9pO1xuXG4gIC8vIGluaXRpYWxpemUgdXNlciBvYmplY3Qgd2l0aCBlbXB0eSB2YWx1ZXNcbiAgJHNjb3BlLnVzZXIgPSB7fTtcblxuICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbigpIHtcbiAgICB1c2VyU2VydmljZS5sb2dpbigkc2NvcGUudXNlciwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICBpZiAoZGF0YS50eXBlID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICB1c2VyU2VydmljZS5zZXRVc2VyID0gZGF0YS51c2VyO1xuICAgICAgICAkc3RhdGUuZ28oJ2NvdXJzZXMnKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvLyBWYWxpZGF0aW9uIC0tLS0tLS0tLS0tLS1cbiAgJHNjb3BlLnZhbGlkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2hlbGxvJyk7XG4gICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgfTtcblxuICAvLyB1c2VybmFtZSB2YWxpZGF0aW9uXG4gIGZ1bmN0aW9uIHZhbGlkYXRlVXNlcigpIHtcbiAgICB2YXIgdXNlcm5hbWUgPSAkc2NvcGUudXNlci51c2VybmFtZTtcblxuICAgIGlmICggdXNlcm5hbWUgPT09ICcnIHx8IHVzZXJuYW1lID09PSAwIHx8ICFzYW5pdGl6ZUlucHV0KHVzZXJuYW1lKSApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdpbnZhbGlkIHVzZXJuYW1lJyk7XG4gICAgICByZXR1cm4gZmFsc2U7ICAgLy8gTmVlZCB0byBhZGQgaW5jb3JyZWN0IGJvb3RzdHJhcCBjbGFzc1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBwYXNzd29yZCB2YWxpZGF0aW9uXG4gIGZ1bmN0aW9uIHZhbGlkYXRlUGFzc3dvcmQoKSB7XG4gICAgdmFyIHBhc3N3b3JkID0gJHNjb3BlLnVzZXIucGFzc3dvcmQ7XG5cbiAgICBpZiAoIHBhc3N3b3JkID09PSAnJyB8fCBwYXNzd29yZCA9PT0gMCB8fCAhc2FuaXRpemVJbnB1dChwYXNzd29yZCkgKSB7XG4gICAgICBjb25zb2xlLmxvZygnaW52YWxpZCBwYXNzd29yZCcpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBzYW5pdGl6ZSBpbnB1dHMgYmVmb3JlIHNlbmRpbmcgdG8gc2VydmVyXG4gIGZ1bmN0aW9uIHNhbml0aXplSW5wdXQodmFsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1dKTtcblxuXG4iLCIvLyB1c2VyU2VydmljZS5qcyA9PT09PT09PT09PT09PT09PT09PT1cbmFuZ3VsYXIubW9kdWxlKCdMTVNBcHAnKVxuLmZhY3RvcnkoJ3VzZXJTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gIHZhciBiYXNlVXJsID0gJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMC9hcGkvJztcbiAgdmFyIHVzZXJVcmwgPSBiYXNlVXJsICsgJ3VzZXIvJztcbiAgdmFyIGxvZ2luVXJsID0gYmFzZVVybCArICdsb2dpbic7XG4gIHZhciBpbnN0cnVjdG9yVXJsID0gYmFzZVVybCArICdpbnN0cnVjdG9ycyc7XG4gIHZhciBjdXJyZW50VXNlciA9ICcnO1xuICB2YXIgaXNMb2dnZWRJbiA9IGZhbHNlO1xuICB2YXIgY291cnNlcyA9ICcnO1xuICB2YXIgcm9sZSA9ICcnO1xuXG4gIHZhciBfY3JlYXRlVXNlciA9IGZ1bmN0aW9uKHVzZXIsIGNiKSB7XG4gICAgdmFyIGJvZHkgPSB7IGRhdGEgOiB1c2VyIH07XG4gICAgJGh0dHAucG9zdCh1c2VyVXJsLCBib2R5KS50aGVuKFxuICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlcykge1xuICAgICAgICBjdXJyZW50VXNlciA9IHJlcy5kYXRhLmRhdGE7XG4gICAgICAgIGlzTG9nZ2VkSW4gPSB0cnVlO1xuICAgICAgICByZXR1cm4gY2IocmVzLmRhdGEuZGF0YSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuZGF0YSk7XG4gICAgICB9XG4gICAgKVxuICB9O1xuXG4gIHZhciBfbG9naW4gPSBmdW5jdGlvbih1c2VyLCBjYikge1xuICAgIHZhciBib2R5ID0geyBkYXRhIDogdXNlciB9O1xuICAgIGNvbnNvbGUubG9nKGJvZHkpO1xuICAgICRodHRwLnBvc3QobG9naW5VcmwsIGJvZHkpLnRoZW4oXG4gICAgICBmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzKSB7XG4gICAgICAgIHJldHVybiBjYihyZXMuZGF0YS5kYXRhKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgfVxuICAgIClcbiAgfVxuICBcbiAgdmFyIF9zZXRVc2VyID0gZnVuY3Rpb24odXNlcikge1xuICAgIGN1cnJlbnRVc2VyID0gdXNlcjtcbiAgICBpc0xvZ2dlZEluID0gdHJ1ZTtcbiAgICByb2xlID0gdXNlci5yb2xlO1xuICB9XG5cbiAgdmFyIF9nZXRVc2VyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGN1cnJlbnRVc2VyO1xuICB9XG5cbiAgdmFyIF9nZXRJbnN0cnVjdG9ycyA9IGZ1bmN0aW9uKGNiKSB7XG4gICAgJGh0dHAuZ2V0KGluc3RydWN0b3JVcmwpLnRoZW4oXG4gICAgICBmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzKSB7XG4gICAgICAgIHJldHVybiBjYihyZXMuZGF0YS5kYXRhKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgfVxuICAgICk7XG4gIH07XG5cbiAgdmFyIF9sb2dPdXQgPSBmdW5jdGlvbigpIHtcbiAgICBjdXJyZW50VXNlciA9ICcnO1xuICAgIGlzTG9nZ2VkSW4gPSBmYWxzZTtcbiAgICByb2xlID0gJyc7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldEluc3RydWN0b3JzIDogX2dldEluc3RydWN0b3JzLFxuICAgIGNyZWF0ZVVzZXIgOiBfY3JlYXRlVXNlcixcbiAgICBzZXRDdXJyZW50VXNlciA6IF9zZXRVc2VyLFxuICAgIGxvZ2luIDogX2xvZ2luLFxuICAgIGxvZ291dCA6IF9sb2dPdXQsXG4gICAgcm9sZSA6IHJvbGUsXG4gICAgZ2V0Q3VycmVudFVzZXIgOiBfZ2V0VXNlclxuICB9XG59XSk7IiwiLy8gU2lnblVwQ29udHJvbGxlci5qcyA9PT09PT09PT09PT09PT09XG5hbmd1bGFyLm1vZHVsZSgnTE1TQXBwJylcbi5jb250cm9sbGVyKCdTaWdudXBDb250cm9sbGVyJywgWyckc2NvcGUnLCAndXNlclNlcnZpY2UnLCAnY291cnNlU2VydmljZScsIGZ1bmN0aW9uKCRzY29wZSwgdXNlclNlcnZpY2UsIGNvdXJzZVNlcnZpY2UpIHtcbiAgLy8gZW1haWwgcGF0dGVyblxuICAkc2NvcGUuZW1haWxQYXR0ZXJuID0gL14oW1xcdy1dKyg/OlxcLltcXHctXSspKilAKCg/OltcXHctXStcXC4pKlxcd1tcXHctXXswLDY2fSlcXC4oW2Etel17Miw2fSg/OlxcLlthLXpdezJ9KT8pJC9pO1xuXG4gICRzY29wZS5yb2xlcyA9IFsnc3R1ZGVudCcsICdpbnN0cnVjdG9yJ107XG5cbiAgLy8gbmV3IHVzZXIgZnJvbSBmb3JtXG4gICRzY29wZS5uZXdVc2VyID0ge1xuICAgIGZpcnN0bmFtZSA6ICcnLFxuICAgIGxhc3RuYW1lIDogJycsXG4gICAgZW1haWwgOiAnJyxcbiAgICBwYXNzd29yZCA6ICcnLFxuICAgIHJvbGUgOiAnJ1xuICB9O1xuXG4gICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICB1c2VyU2VydmljZS5jcmVhdGVVc2VyKCRzY29wZS5uZXdVc2VyLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICB9KTtcbiAgfVxuXG59XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
