angular.module("LMSApp",["ui.router"]).constant("RESOURCES",function(){var t="http://127.0.0.1:3000/api/";return{BASE:t,USER:t+"users/",COURSE:t+"course/"}}).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,r){e.otherwise("/login"),t.state("login",{url:"/login",templateUrl:"src/login/login.html"}).state("signup",{url:"/signup",templateUrl:"src/signup/signup.html"}).state("overview",{url:"/overview",templateUrl:"src/login/overview.html"}).state("courses",{url:"/courses",templateUrl:"src/course/courses.html"}).state("quizes",{url:"/quizes",templateUrl:"src/quiz/quizes.html"}).state("profile",{url:"/profile",templateUrl:"src/profile/profile.html"}),r.html5Mode(!0)}]).run(["$rootScope",function(t){t.$on("$stateChangeStart",function(e,r,o){r.requireLogin&&"undefined"==typeof t.currentUser&&(e.preventDefault(),$state.go("login"))})}]),angular.module("LMSApp").controller("CourseController",["$scope","courseService","userService",function(t,e,r){t.newCourse={title:"",department:"",number:"",instructor:""},t.addCourse=function(){console.log(t.newCourse)};var o=function(){e.fetch(function(e){r.getInstructors(function(r){t.instructors=r;var o=e.map(function(t){for(var e=0;e<r.length;e++)r[e]._id===t.instructorId&&(t.instructorName=r[e].lastname);return t});t.courses=o})})};o()}]),angular.module("LMSApp").factory("courseService",["$http",function(t){var e="http://127.0.0.1:3000/api/course",r=function(r){t.get(e).then(function(t){return r(t.data.data)},function(t){console.log(t)})};return{fetch:r}}]),angular.module("LMSApp").controller("LoginController",["$scope","$state","userService",function(t,e,r){t.emailPattern=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,t.user={},t.login=function(){r.login(t.user,function(t){t.type===!0&&(r.setUser=t.user,e.go("courses"))})},t.validate=function(){console.log("hello"),$location.path("/")}}]),angular.module("LMSApp").factory("userService",["$http","RESOURCES",function(t,e){var r="http://127.0.0.1:3000/api/",o=r+"login/",n=r+"instructors",u="",a=!1,i="",l=function(r,o){var n={data:r};console.log(e),t.post(e.USER,n).then(function(t){return u=t.data.data,a=!0,o(t.data.data)},function(t){console.log(t.data.data)})},s=function(e,r){var n={data:e};t.post(o,n).then(function(t){return r(t.data.data)},function(t){console.log(t)})},c=function(t){u=t,a=!0,i=t.role},f=function(){return u},p=function(e){t.get(n).then(function(t){return e(t.data.data)},function(t){console.log(t)})},g=function(){u="",a=!1,i=""};return{getInstructors:p,createUser:l,setCurrentUser:c,login:s,logout:g,role:i,getCurrentUser:f}}]),angular.module("LMSApp").controller("SignupController",["$scope","userService","courseService",function(t,e,r){t.emailPattern=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,t.roles=["student","instructor"],t.newUser={firstname:"",lastname:"",email:"",password:"",role:""},t.submit=function(){e.createUser(t.newUser,function(t){console.log(t)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvdXJzZS9Db3Vyc2VDb250cm9sbGVyLmpzIiwiY291cnNlL2NvdXJzZVNlcnZpY2UuanMiLCJsb2dpbi9Mb2dpbkNvbnRyb2xsZXIuanMiLCJzZXJ2aWNlcy91c2VyU2VydmljZS5qcyIsInNpZ251cC9TaWdudXBDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25zdGFudCIsImJhc2VfdXJsIiwiQkFTRSIsIlVTRVIiLCJDT1VSU0UiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImh0bWw1TW9kZSIsInJ1biIsIiRyb290U2NvcGUiLCIkb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsInJlcXVpcmVMb2dpbiIsImN1cnJlbnRVc2VyIiwicHJldmVudERlZmF1bHQiLCIkc3RhdGUiLCJnbyIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJjb3Vyc2VTZXJ2aWNlIiwidXNlclNlcnZpY2UiLCJuZXdDb3Vyc2UiLCJ0aXRsZSIsImRlcGFydG1lbnQiLCJudW1iZXIiLCJpbnN0cnVjdG9yIiwiYWRkQ291cnNlIiwiY29uc29sZSIsImxvZyIsImluaXQiLCJmZXRjaCIsImNvdXJzZXMiLCJnZXRJbnN0cnVjdG9ycyIsImluc3RydWN0b3JzIiwiYWxsQ291cnNlcyIsIm1hcCIsImNvdXJzZSIsImkiLCJsZW5ndGgiLCJfaWQiLCJpbnN0cnVjdG9ySWQiLCJpbnN0cnVjdG9yTmFtZSIsImxhc3RuYW1lIiwiZmFjdG9yeSIsIiRodHRwIiwiYmFzZVVybCIsImdldEFsbENvdXJzZXMiLCJjYiIsImdldCIsInRoZW4iLCJyZXMiLCJkYXRhIiwiZW1haWxQYXR0ZXJuIiwidXNlciIsImxvZ2luIiwidHlwZSIsInNldFVzZXIiLCJ2YWxpZGF0ZSIsIiRsb2NhdGlvbiIsInBhdGgiLCJSRVNPVVJDRVMiLCJsb2dpblVybCIsImluc3RydWN0b3JVcmwiLCJpc0xvZ2dlZEluIiwicm9sZSIsIl9jcmVhdGVVc2VyIiwiYm9keSIsInBvc3QiLCJfbG9naW4iLCJfc2V0VXNlciIsIl9nZXRVc2VyIiwiX2dldEluc3RydWN0b3JzIiwiX2xvZ091dCIsImNyZWF0ZVVzZXIiLCJzZXRDdXJyZW50VXNlciIsImxvZ291dCIsImdldEN1cnJlbnRVc2VyIiwicm9sZXMiLCJuZXdVc2VyIiwiZmlyc3RuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInN1Ym1pdCJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsVUFBQSxjQUdBQyxTQUFBLFlBQUEsV0FDQSxHQUFBQyxHQUFBLDRCQUNBLFFBQ0FDLEtBQUFELEVBQ0FFLEtBQUFGLEVBQUEsU0FDQUcsT0FBQUgsRUFBQSxhQUtBSSxRQUFBLGlCQUFBLHFCQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBRUFELEVBQUFFLFVBQUEsVUFFQUgsRUFHQUksTUFBQSxTQUNBQyxJQUFBLFNBQ0FDLFlBQUEseUJBS0FGLE1BQUEsVUFDQUMsSUFBQSxVQUNBQyxZQUFBLDJCQUlBRixNQUFBLFlBQ0FDLElBQUEsWUFDQUMsWUFBQSw0QkFLQUYsTUFBQSxXQUNBQyxJQUFBLFdBQ0FDLFlBQUEsNEJBS0FGLE1BQUEsVUFDQUMsSUFBQSxVQUNBQyxZQUFBLHlCQUlBRixNQUFBLFdBQ0FDLElBQUEsV0FDQUMsWUFBQSw2QkFHQUosRUFBQUssV0FBQSxNQUtBQyxLQUFBLGFBQUEsU0FBQUMsR0FHQUEsRUFBQUMsSUFBQSxvQkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxjQUFBLG1CQUFBTCxHQUFBTSxjQUNBSixFQUFBSyxpQkFFQUMsT0FBQUMsR0FBQSxlQ3RFQTFCLFFBQUFDLE9BQUEsVUFDQTBCLFdBQUEsb0JBQUEsU0FBQSxnQkFBQSxjQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0FGLEVBQUFHLFdBQ0FDLE1BQUEsR0FDQUMsV0FBQSxHQUNBQyxPQUFBLEdBQ0FDLFdBQUEsSUFJQVAsRUFBQVEsVUFBQSxXQUNBQyxRQUFBQyxJQUFBVixFQUFBRyxXQUlBLElBQUFRLEdBQUEsV0FDQVYsRUFBQVcsTUFBQSxTQUFBQyxHQUNBWCxFQUFBWSxlQUFBLFNBQUFDLEdBQ0FmLEVBQUFlLFlBQUFBLENBR0EsSUFBQUMsR0FBQUgsRUFBQUksSUFBQSxTQUFBQyxHQUNBLElBQUEsR0FBQUMsR0FBQSxFQUFBQSxFQUFBSixFQUFBSyxPQUFBRCxJQUNBSixFQUFBSSxHQUFBRSxNQUFBSCxFQUFBSSxlQUNBSixFQUFBSyxlQUFBUixFQUFBSSxHQUFBSyxTQUdBLE9BQUFOLElBR0FsQixHQUFBYSxRQUFBRyxNQUtBTCxRQ25DQXZDLFFBQUFDLE9BQUEsVUFHQW9ELFFBQUEsaUJBQUEsUUFBQSxTQUFBQyxHQUVBLEdBQUFDLEdBQUEsbUNBR0FDLEVBQUEsU0FBQUMsR0FFQUgsRUFBQUksSUFBQUgsR0FBQUksS0FFQSxTQUFBQyxHQUNBLE1BQUFILEdBQUFHLEVBQUFDLEtBQUFBLE9BSUEsU0FBQUQsR0FDQXZCLFFBQUFDLElBQUFzQixLQUtBLFFBQ0FwQixNQUFBZ0IsTUN6QkF4RCxRQUFBQyxPQUFBLFVBQ0EwQixXQUFBLG1CQUFBLFNBQUEsU0FBQSxjQUFBLFNBQUFDLEVBQUFILEVBQUFLLEdBRUFGLEVBQUFrQyxhQUFBLHFGQUdBbEMsRUFBQW1DLFFBRUFuQyxFQUFBb0MsTUFBQSxXQUNBbEMsRUFBQWtDLE1BQUFwQyxFQUFBbUMsS0FBQSxTQUFBRixHQUVBQSxFQUFBSSxRQUFBLElBQ0FuQyxFQUFBb0MsUUFBQUwsRUFBQUUsS0FDQXRDLEVBQUFDLEdBQUEsZUFNQUUsRUFBQXVDLFNBQUEsV0FDQTlCLFFBQUFDLElBQUEsU0FDQThCLFVBQUFDLEtBQUEsU0NwQkFyRSxRQUFBQyxPQUFBLFVBQ0FvRCxRQUFBLGVBQUEsUUFBQSxZQUFBLFNBQUFDLEVBQUFnQixHQUNBLEdBQUFmLEdBQUEsNkJBRUFnQixFQUFBaEIsRUFBQSxTQUNBaUIsRUFBQWpCLEVBQUEsY0FDQWhDLEVBQUEsR0FDQWtELEdBQUEsRUFFQUMsRUFBQSxHQUdBQyxFQUFBLFNBQUFaLEVBQUFOLEdBQ0EsR0FBQW1CLElBQUFmLEtBQUFFLEVBQ0ExQixTQUFBQyxJQUFBZ0MsR0FDQWhCLEVBQUF1QixLQUFBUCxFQUFBakUsS0FBQXVFLEdBQUFqQixLQUNBLFNBQUFDLEdBR0EsTUFGQXJDLEdBQUFxQyxFQUFBQyxLQUFBQSxLQUNBWSxHQUFBLEVBQ0FoQixFQUFBRyxFQUFBQyxLQUFBQSxPQUVBLFNBQUFELEdBQ0F2QixRQUFBQyxJQUFBc0IsRUFBQUMsS0FBQUEsU0FNQWlCLEVBQUEsU0FBQWYsRUFBQU4sR0FDQSxHQUFBbUIsSUFBQWYsS0FBQUUsRUFDQVQsR0FBQXVCLEtBQUFOLEVBQUFLLEdBQUFqQixLQUNBLFNBQUFDLEdBQ0EsTUFBQUgsR0FBQUcsRUFBQUMsS0FBQUEsT0FFQSxTQUFBRCxHQUNBdkIsUUFBQUMsSUFBQXNCLE1BTUFtQixFQUFBLFNBQUFoQixHQUNBeEMsRUFBQXdDLEVBQ0FVLEdBQUEsRUFDQUMsRUFBQVgsRUFBQVcsTUFJQU0sRUFBQSxXQUNBLE1BQUF6RCxJQUlBMEQsRUFBQSxTQUFBeEIsR0FDQUgsRUFBQUksSUFBQWMsR0FBQWIsS0FDQSxTQUFBQyxHQUNBLE1BQUFILEdBQUFHLEVBQUFDLEtBQUFBLE9BRUEsU0FBQUQsR0FDQXZCLFFBQUFDLElBQUFzQixNQU1Bc0IsRUFBQSxXQUNBM0QsRUFBQSxHQUNBa0QsR0FBQSxFQUNBQyxFQUFBLEdBR0EsUUFDQWhDLGVBQUF1QyxFQUNBRSxXQUFBUixFQUNBUyxlQUFBTCxFQUNBZixNQUFBYyxFQUNBTyxPQUFBSCxFQUNBUixLQUFBQSxFQUNBWSxlQUFBTixNQzlFQWhGLFFBQUFDLE9BQUEsVUFDQTBCLFdBQUEsb0JBQUEsU0FBQSxjQUFBLGdCQUFBLFNBQUFDLEVBQUFFLEVBQUFELEdBRUFELEVBQUFrQyxhQUFBLHFGQUVBbEMsRUFBQTJELE9BQUEsVUFBQSxjQUdBM0QsRUFBQTRELFNBQ0FDLFVBQUEsR0FDQXJDLFNBQUEsR0FDQXNDLE1BQUEsR0FDQUMsU0FBQSxHQUNBakIsS0FBQSxJQUdBOUMsRUFBQWdFLE9BQUEsV0FDQTlELEVBQUFxRCxXQUFBdkQsRUFBQTRELFFBQUEsU0FBQTNCLEdBQ0F4QixRQUFBQyxJQUFBdUIiLCJmaWxlIjoicHVibGljL2FwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdMTVNBcHAnLCBbJ3VpLnJvdXRlciddKVxuXG4vLyBhcHAgY29uc3RhbnRzID09PT09PT09PT09PT09PT09PT09PT1cbi5jb25zdGFudCgnUkVTT1VSQ0VTJywgZnVuY3Rpb24oKSB7XG4gIHZhciBiYXNlX3VybCA9ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpLyc7XG4gIHJldHVybiB7XG4gICAgQkFTRSA6IGJhc2VfdXJsLFxuICAgIFVTRVIgOiBiYXNlX3VybCArICd1c2Vycy8nLFxuICAgIENPVVJTRSA6IGJhc2VfdXJsICsgJ2NvdXJzZS8nLFxuICB9O1xufSlcblxuLy8gY29uZmlnIHNldHRpbmdzIGZvciByb3V0ZXJcbi5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICBcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2xvZ2luJyk7XG5cbiAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIFxuICAgICAgLy8gbG9naW4gc3RhdGUgPT09PT09PT09PT09PT09PT09XG4gICAgICAuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvbG9naW4vbG9naW4uaHRtbCdcbiAgICAgICAgICAvLyByZXF1aXJlTG9naW46IGZhbHNlXG4gICAgICB9KVxuXG4gICAgICAvLyBzaWdudXAgc3RhdGUgPT09PT09PT09PT09PT09PT1cbiAgICAgIC5zdGF0ZSgnc2lnbnVwJywge1xuICAgICAgICB1cmw6ICcvc2lnbnVwJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvc2lnbnVwL3NpZ251cC5odG1sJ1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gb3ZlcnZpZXcgc3RhdGUgPT09PT09PT09PT09PT09XG4gICAgICAuc3RhdGUoJ292ZXJ2aWV3Jywge1xuICAgICAgICAgIHVybDogJy9vdmVydmlldycsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvbG9naW4vb3ZlcnZpZXcuaHRtbCdcbiAgICAgICAgICAvLyByZXF1aXJlTG9naW46IHRydWVcbiAgICAgIH0pXG5cbiAgICAgIC8vIGNvdXJzZXMgc3RhdGUgPT09PT09PT09PT09PT09PVxuICAgICAgLnN0YXRlKCdjb3Vyc2VzJywge1xuICAgICAgICB1cmw6ICcvY291cnNlcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3JjL2NvdXJzZS9jb3Vyc2VzLmh0bWwnXG4gICAgICAgIC8vIHJlcXVpcmVMb2dpbjogdHJ1ZVxuICAgICAgfSlcblxuICAgICAgLy8gcXVpeiBzdGF0ZSA9PT09PT09PT09PT09PT09PT09XG4gICAgICAuc3RhdGUoJ3F1aXplcycsIHtcbiAgICAgICAgdXJsOiAnL3F1aXplcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3JjL3F1aXovcXVpemVzLmh0bWwnXG4gICAgICB9KVxuXG4gICAgICAvLyBwcm9maWxlIHN0YXRlID09PT09PT09PT09PT09PT1cbiAgICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcbiAgICAgICAgdXJsIDogJy9wcm9maWxlJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvcHJvZmlsZS9wcm9maWxlLmh0bWwnXG4gICAgICB9KVxuXG4gICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgIFxufSlcblxuLy8gRm9yIGF1dGhlbnRpY2F0aW9uIGNoZWNrc1xuLnJ1bihmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xuXG4gIC8vIGxpc3RlbiBvbiBzdGF0ZSBjaGFuZ2UgZXZlbnRzXG4gICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMpIHtcbiAgICAvLyBpZiBsb2dpbiBpcyByZXF1aXJlZCBhbmQgdGhlcmUgaXMgbm8gY3VycmVudFVzZXIgc2V0LCBcbiAgICBpZiAodG9TdGF0ZS5yZXF1aXJlTG9naW4gJiYgdHlwZW9mICRyb290U2NvcGUuY3VycmVudFVzZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gcmVkaXJlY3QgdG8gbG9naW5cbiAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICB9XG4gIH0pO1xuXG59KTsiLCIvLyBDb3Vyc2VDb250cm9sbGVyLmpzID09PT09PT09PT09PT09PT1cbmFuZ3VsYXIubW9kdWxlKCdMTVNBcHAnKVxuLmNvbnRyb2xsZXIoJ0NvdXJzZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICdjb3Vyc2VTZXJ2aWNlJywgJ3VzZXJTZXJ2aWNlJywgZnVuY3Rpb24oJHNjb3BlLCBjb3Vyc2VTZXJ2aWNlLCB1c2VyU2VydmljZSkge1xuICAkc2NvcGUubmV3Q291cnNlID0ge1xuICAgIHRpdGxlIDogJycsXG4gICAgZGVwYXJ0bWVudCA6ICcnLFxuICAgIG51bWJlciA6ICcnLFxuICAgIGluc3RydWN0b3IgOiAnJ1xuICB9O1xuXG4gIC8vIG5lZWQgdG8gaG9vayBpbnRvIGFwaVxuICAkc2NvcGUuYWRkQ291cnNlID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJHNjb3BlLm5ld0NvdXJzZSk7XG4gIH1cblxuICAvLyBnZXQgYWxsIGNvdXJzZXMgb24gbG9hZFxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGNvdXJzZVNlcnZpY2UuZmV0Y2goIGZ1bmN0aW9uKGNvdXJzZXMpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEluc3RydWN0b3JzKGZ1bmN0aW9uKGluc3RydWN0b3JzKSB7XG4gICAgICAgICRzY29wZS5pbnN0cnVjdG9ycyA9IGluc3RydWN0b3JzO1xuICAgICAgICBcbiAgICAgICAgLy8gc2V0IGNvdXJzZXNcbiAgICAgICAgdmFyIGFsbENvdXJzZXMgPSBjb3Vyc2VzLm1hcCggZnVuY3Rpb24oY291cnNlKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnN0cnVjdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGluc3RydWN0b3JzW2ldLl9pZCA9PT0gY291cnNlLmluc3RydWN0b3JJZCkge1xuICAgICAgICAgICAgICBjb3Vyc2UuaW5zdHJ1Y3Rvck5hbWUgPSBpbnN0cnVjdG9yc1tpXS5sYXN0bmFtZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4gY291cnNlO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgICRzY29wZS5jb3Vyc2VzID0gYWxsQ291cnNlcztcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgaW5pdCgpO1xufV0pOyIsIi8vIGNvdXJzZVNlcnZpY2UuanNcbmFuZ3VsYXIubW9kdWxlKCdMTVNBcHAnKVxuXG4vLyBmYWN0b3J5IHNlcnZpY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgY291cnNlcyBBUEkgYW5kIHJldHJlaXZlIGRhdGFcbi5mYWN0b3J5KCdjb3Vyc2VTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gIC8vIGJhc2UgdXJsIGZvciBBUEkgZW5kcG9pbnRcbiAgdmFyIGJhc2VVcmwgPSAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2FwaS9jb3Vyc2UnO1xuXG4gIC8vIGZldGNoIGNvdXJzZXMgYW5kIGNhbGxiYWNrcyA9PT09PT09PT09PT09PT09XG4gIHZhciBnZXRBbGxDb3Vyc2VzID0gZnVuY3Rpb24oY2IpIHtcbiAgICAvLyBjYiBpcyB0aGUgY2FsbGJhY2sgcHJvdmlkZWQgYnkgdGhlIGNvbnRyb2xsZXJcbiAgICAkaHR0cC5nZXQoYmFzZVVybCkudGhlbihcbiAgICAgIC8vIGNhbGxiYWNrIGZvciBzdWNjZXNzZnVsIHJlcXVlc3RcbiAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXMpIHtcbiAgICAgICAgcmV0dXJuIGNiKHJlcy5kYXRhLmRhdGEpO1xuICAgICAgfSxcblxuICAgICAgLy8gY2FsbGJhY2sgZm9yIGVycm9yXG4gICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgfVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBmZXRjaCA6IGdldEFsbENvdXJzZXNcbiAgfVxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0xNU0FwcCcpXG4uY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJ3VzZXJTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCB1c2VyU2VydmljZSApIHtcbiAgLy8gZW1haWwgcGF0dGVybiByZWdleFxuICAkc2NvcGUuZW1haWxQYXR0ZXJuID0gL14oW1xcdy1dKyg/OlxcLltcXHctXSspKilAKCg/OltcXHctXStcXC4pKlxcd1tcXHctXXswLDY2fSlcXC4oW2Etel17Miw2fSg/OlxcLlthLXpdezJ9KT8pJC9pO1xuXG4gIC8vIGluaXRpYWxpemUgdXNlciBvYmplY3Qgd2l0aCBlbXB0eSB2YWx1ZXNcbiAgJHNjb3BlLnVzZXIgPSB7fTtcblxuICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbigpIHtcbiAgICB1c2VyU2VydmljZS5sb2dpbigkc2NvcGUudXNlciwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XG4gICAgICBpZiAoZGF0YS50eXBlID09PSB0cnVlKSB7XG4gICAgICAgIHVzZXJTZXJ2aWNlLnNldFVzZXIgPSBkYXRhLnVzZXI7XG4gICAgICAgICRzdGF0ZS5nbygnY291cnNlcycpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFZhbGlkYXRpb24gLS0tLS0tLS0tLS0tLVxuICAkc2NvcGUudmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnaGVsbG8nKTtcbiAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICB9O1xuXG4gIC8vIHVzZXJuYW1lIHZhbGlkYXRpb25cbiAgZnVuY3Rpb24gdmFsaWRhdGVVc2VyKCkge1xuICAgIHZhciB1c2VybmFtZSA9ICRzY29wZS51c2VyLnVzZXJuYW1lO1xuXG4gICAgaWYgKCB1c2VybmFtZSA9PT0gJycgfHwgdXNlcm5hbWUgPT09IDAgfHwgIXNhbml0aXplSW5wdXQodXNlcm5hbWUpICkge1xuICAgICAgY29uc29sZS5sb2coJ2ludmFsaWQgdXNlcm5hbWUnKTtcbiAgICAgIHJldHVybiBmYWxzZTsgICAvLyBOZWVkIHRvIGFkZCBpbmNvcnJlY3QgYm9vdHN0cmFwIGNsYXNzXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIHBhc3N3b3JkIHZhbGlkYXRpb25cbiAgZnVuY3Rpb24gdmFsaWRhdGVQYXNzd29yZCgpIHtcbiAgICB2YXIgcGFzc3dvcmQgPSAkc2NvcGUudXNlci5wYXNzd29yZDtcblxuICAgIGlmICggcGFzc3dvcmQgPT09ICcnIHx8IHBhc3N3b3JkID09PSAwIHx8ICFzYW5pdGl6ZUlucHV0KHBhc3N3b3JkKSApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdpbnZhbGlkIHBhc3N3b3JkJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIHNhbml0aXplIGlucHV0cyBiZWZvcmUgc2VuZGluZyB0byBzZXJ2ZXJcbiAgZnVuY3Rpb24gc2FuaXRpemVJbnB1dCh2YWwpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufV0pO1xuXG5cbiIsIi8vIHVzZXJTZXJ2aWNlLmpzID09PT09PT09PT09PT09PT09PT09PVxuYW5ndWxhci5tb2R1bGUoJ0xNU0FwcCcpXG4uZmFjdG9yeSgndXNlclNlcnZpY2UnLCBbJyRodHRwJywgJ1JFU09VUkNFUycsIGZ1bmN0aW9uKCRodHRwLCBSRVNPVVJDRVMpIHtcbiAgdmFyIGJhc2VVcmwgPSAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2FwaS8nO1xuICB2YXIgdXNlclVybCA9IGJhc2VVcmwgKyAndXNlci8nO1xuICB2YXIgbG9naW5VcmwgPSBiYXNlVXJsICsgJ2xvZ2luLyc7XG4gIHZhciBpbnN0cnVjdG9yVXJsID0gYmFzZVVybCArICdpbnN0cnVjdG9ycyc7XG4gIHZhciBjdXJyZW50VXNlciA9ICcnO1xuICB2YXIgaXNMb2dnZWRJbiA9IGZhbHNlO1xuICB2YXIgY291cnNlcyA9ICcnO1xuICB2YXIgcm9sZSA9ICcnO1xuXG4gIC8vIEZvciBzaWdudXAgcGFnZSwgbWV0aG9kIHRvIGNyZWF0ZSBuZXcgdXNlclxuICB2YXIgX2NyZWF0ZVVzZXIgPSBmdW5jdGlvbih1c2VyLCBjYikge1xuICAgIHZhciBib2R5ID0geyBkYXRhIDogdXNlciB9O1xuICAgIGNvbnNvbGUubG9nKFJFU09VUkNFUyk7XG4gICAgJGh0dHAucG9zdCggUkVTT1VSQ0VTLlVTRVIsIGJvZHkgKS50aGVuKFxuICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlcykge1xuICAgICAgICBjdXJyZW50VXNlciA9IHJlcy5kYXRhLmRhdGE7XG4gICAgICAgIGlzTG9nZ2VkSW4gPSB0cnVlO1xuICAgICAgICByZXR1cm4gY2IocmVzLmRhdGEuZGF0YSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuZGF0YSk7XG4gICAgICB9XG4gICAgKTtcbiAgfTtcblxuICAvLyBMb2dpbiBwYWdlLCBtZXRob2QgdG8gbG9naW4gYSB1c2VyXG4gIHZhciBfbG9naW4gPSBmdW5jdGlvbih1c2VyLCBjYikge1xuICAgIHZhciBib2R5ID0geyBkYXRhIDogdXNlciB9O1xuICAgICRodHRwLnBvc3QobG9naW5VcmwsIGJvZHkpLnRoZW4oXG4gICAgICBmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzKSB7XG4gICAgICAgIHJldHVybiBjYihyZXMuZGF0YS5kYXRhKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgfVxuICAgICk7XG4gIH07XG4gIFxuICAvLyBMb2dpbkNvbnRyb2xsZXIsIHNldCBhIG5ldyB1c2VyXG4gIHZhciBfc2V0VXNlciA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICBjdXJyZW50VXNlciA9IHVzZXI7XG4gICAgaXNMb2dnZWRJbiA9IHRydWU7XG4gICAgcm9sZSA9IHVzZXIucm9sZTtcbiAgfTtcblxuICAvLyByZXR1cm4gZGF0YSBvZiBjdXJyZW50IHVzZXJcbiAgdmFyIF9nZXRVc2VyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGN1cnJlbnRVc2VyO1xuICB9O1xuXG4gIC8vIEdldCBhbGwgaW5zdHJ1Y3RvcnNcbiAgdmFyIF9nZXRJbnN0cnVjdG9ycyA9IGZ1bmN0aW9uKGNiKSB7XG4gICAgJGh0dHAuZ2V0KGluc3RydWN0b3JVcmwpLnRoZW4oXG4gICAgICBmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzKSB7XG4gICAgICAgIHJldHVybiBjYihyZXMuZGF0YS5kYXRhKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgfVxuICAgICk7XG4gIH07XG5cbiAgLy8gbG9nb3V0IHRoZSBjdXJyZW50IHVzZXIsIHVuc2V0IGFueSB1c2VyIGRhdGFcbiAgdmFyIF9sb2dPdXQgPSBmdW5jdGlvbigpIHtcbiAgICBjdXJyZW50VXNlciA9ICcnO1xuICAgIGlzTG9nZ2VkSW4gPSBmYWxzZTtcbiAgICByb2xlID0gJyc7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRJbnN0cnVjdG9ycyA6IF9nZXRJbnN0cnVjdG9ycyxcbiAgICBjcmVhdGVVc2VyIDogX2NyZWF0ZVVzZXIsXG4gICAgc2V0Q3VycmVudFVzZXIgOiBfc2V0VXNlcixcbiAgICBsb2dpbiA6IF9sb2dpbixcbiAgICBsb2dvdXQgOiBfbG9nT3V0LFxuICAgIHJvbGUgOiByb2xlLFxuICAgIGdldEN1cnJlbnRVc2VyIDogX2dldFVzZXJcbiAgfTtcbn1dKTsiLCIvLyBTaWduVXBDb250cm9sbGVyLmpzID09PT09PT09PT09PT09PT1cbmFuZ3VsYXIubW9kdWxlKCdMTVNBcHAnKVxuLmNvbnRyb2xsZXIoJ1NpZ251cENvbnRyb2xsZXInLCBbJyRzY29wZScsICd1c2VyU2VydmljZScsICdjb3Vyc2VTZXJ2aWNlJywgZnVuY3Rpb24oJHNjb3BlLCB1c2VyU2VydmljZSwgY291cnNlU2VydmljZSkge1xuICAvLyBlbWFpbCBwYXR0ZXJuXG4gICRzY29wZS5lbWFpbFBhdHRlcm4gPSAvXihbXFx3LV0rKD86XFwuW1xcdy1dKykqKUAoKD86W1xcdy1dK1xcLikqXFx3W1xcdy1dezAsNjZ9KVxcLihbYS16XXsyLDZ9KD86XFwuW2Etel17Mn0pPykkL2k7XG5cbiAgJHNjb3BlLnJvbGVzID0gWydzdHVkZW50JywgJ2luc3RydWN0b3InXTtcblxuICAvLyBuZXcgdXNlciBmcm9tIGZvcm1cbiAgJHNjb3BlLm5ld1VzZXIgPSB7XG4gICAgZmlyc3RuYW1lIDogJycsXG4gICAgbGFzdG5hbWUgOiAnJyxcbiAgICBlbWFpbCA6ICcnLFxuICAgIHBhc3N3b3JkIDogJycsXG4gICAgcm9sZSA6ICcnXG4gIH07XG5cbiAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHVzZXJTZXJ2aWNlLmNyZWF0ZVVzZXIoJHNjb3BlLm5ld1VzZXIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIH0pO1xuICB9XG5cbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
